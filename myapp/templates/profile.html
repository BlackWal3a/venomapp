<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../static/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../static/img/Tunisair_llogo_Deer.png">
  <title>
    Tunisair Dashboard
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="../static/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../static/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link href="../static/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  {% if data.dark_mode == 1 %}
  <link id="pagestyle" href="/static/css/tunisair-dashboard.css" rel="stylesheet">
  {% else  %}
  <link id="pagestyle" href="/static/css/tunisair-dashboard-dark-mode.css" rel="stylesheet">
  {% endif %}
</head>

<body class="g-sidenav-show bg-gray-100">
  {% include 'navbar.html' %}
  <div class="main-content position-relative bg-gray-100 max-height-vh-100 h-100">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg bg-transparent shadow-none position-absolute px-4 w-100 z-index-2">
      <div class="container-fluid py-1">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 ps-2 me-sm-6 me-5">
            <li class="breadcrumb-item text-sm"><a class="text-white opacity-5" href="../">Tunisair</a></li>
            <li class="breadcrumb-item text-sm text-white active" aria-current="page">Profile</li>
          </ol>
          <h6 class="text-white font-weight-bolder ms-2">Profile</h6>
        </nav>
        <div class="collapse navbar-collapse me-md-0 me-sm-4 mt-sm-0 mt-2" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
          </div>
          <ul class="navbar-nav justify-content-end">
            <li class="nav-item px-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-white p-0">
                <i class="fa fa-cog fixed-plugin-button-nav cursor-pointer"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <div class="container-fluid">
      <div class="page-header min-height-300 border-radius-xl mt-4" style="background-image: url('../static/img/Sky_Beautiful.png'); background-position-y: 50%;">
        <span class="mask bg-gradient-primary opacity-6"></span>
      </div>
      <div class="card card-body blur shadow-blur mx-4 mt-n6 overflow-hidden">
        <div class="row gx-4">
          <div class="col-auto">
            <div class="avatar avatar-xl position-relative">
              <img src="../static/img/1253756.png" alt="profile_image" class="w-100 border-radius-lg shadow-sm">
            </div>
          </div>
          <div class="col-auto my-auto">
            <div class="h-100">
              <h5 class="mb-1">
                {{ user.username }}              </h5>
              <p class="mb-0 font-weight-bold text-sm">
                {{ user.email }}
              </p>
            </div>
          </div>
          <div class="col-lg-4 col-md-6 my-sm-auto ms-sm-auto me-sm-0 mx-auto mt-3">
            <div class="nav-wrapper position-relative end-0">
              <ul class="nav nav-pills nav-fill p-1 bg-transparent" role="tablist">
                <li class="nav-item">
                  <a class="nav-link mb-0 px-0 py-1 active" data-bs-toggle="tab" href="javascript:;" role="tab" aria-selected="false">
                    <i class="fa fa-tint" aria-hidden="true"></i>
                    <span class="ms-1">{{data.unit}}</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link mb-0 px-0 py-1 active " data-bs-toggle="tab" href="javascript:;" role="tab" aria-selected="true">
                    <i class="fa fa-coins" aria-hidden="true"></i>
                    <span class="ms-1">{{data.currency}}</span>
                  </a>
                  
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid py-4">
      <div class="row">
        <div class="col-12 col-xl-4">
          <div class="card h-100">
            <div class="card-header pb-0 p-3">
              <div class="card-header text-center pt-4">
                <h5>Platform settings</h5>
              </div>
            
              <!-- profile_form.html -->
              <form method="post" id="unitForm">
                {% csrf_token %}
                <div class="form-group">
                    <label for="unit">Select Unit:</label>
                    <select class="form-control" id="unit" name="unit">
                        <option value="LT" {% if data.unit == 'LT' %}selected{% endif %}>Litre</option>
                        <option value="M3" {% if data.unit == 'M3' %}selected{% endif %}>Cubic Meter</option>
                        <option value="USG" {% if data.unit == 'USG' %}selected{% endif %}>US Gallon</option>
                        <option value="KG" {% if data.unit == 'KG' %}selected{% endif %}>KILOGRAMME</option>
                        <option value="T" {% if data.unit == 'T' %}selected{% endif %}>TONNE</option>
                        <option value="HL" {% if data.unit == 'HL' %}selected{% endif %}>HECTOLITRE</option>
                        <option value="BL" {% if data.unit == 'BL' %}selected{% endif %}>Baril</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary btn-lg bg-gradient-primary ">Save Unit</button>
            </form>
            <div class="nav-item dropdown pe-2 d-flex align-items-center">
              <a href="javascript:;" class="nav-link p-0" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="fa fa-info-circle" aria-hidden="true" {% if data.dark_mode == 1 %} style="color: #344767;" {% else %}style="color: white;" {% endif %}></i>
              </a>
              <ul class="dropdown-menu dropdown-menu-end px-2 py-3 ms-n4" aria-labelledby="dropdownMenuButton">
                  <li class="mb-2">
                      <a class="dropdown-item border-radius-md" href="javascript:;">
                          <div class="text-center">
                            <p style="font-size: 14px; color: #666;">Note:</p>
                            <ul style="list-style-type: disc; text-align: left; margin-left: 20px; z-index=9999">
                                <p>Some conversions for those units<br> will not work because you real <br>conversions must be set.</p>

                            </ul>
                          </div>
                      </a>
                  </li>
              </ul>
          </div>
            <form method="post" id="currencyForm">
                {% csrf_token %}
                <div class="form-group">
                    <label for="currency">Select Currency:</label>
                    <select class="form-control" id="currency" name="currency">
                      <option value="USD" {% if data.currency == 'USD' %}selected{% endif %}>US Dollar</option>
                      <option value="EUR" {% if data.currency == 'EUR' %}selected{% endif %}>Euro</option>
                      <option value="TND" {% if data.currency == 'TND' %}selected{% endif %}>Tunisian Dinar</option>
                      <option value="MIL" {% if data.currency == 'MIL' %}selected{% endif %}>Italian Lira</option>
                      <option value="DZD" {% if data.currency == 'DZD' %}selected{% endif %}>Algerian Dinar</option>
                      <option value="BEF" {% if data.currency == 'BEF' %}selected{% endif %}>Belgian Franc</option>
                      <option value="EGP" {% if data.currency == 'EGP' %}selected{% endif %}>Egyptian Pound</option>
                      <option value="GBP" {% if data.currency == 'GBP' %}selected{% endif %}>British Pound Sterling</option>
                      <option value="ESP" {% if data.currency == 'ESP' %}selected{% endif %}>Spanish Peseta</option>
                      <option value="FRF" {% if data.currency == 'FRF' %}selected{% endif %}>French Franc</option>
                      <option value="GRD" {% if data.currency == 'GRD' %}selected{% endif %}>Greek Drachma</option>
                      <option value="ITL" {% if data.currency == 'ITL' %}selected{% endif %}>Italian Lira</option>
                      <option value="JOD" {% if data.currency == 'JOD' %}selected{% endif %}>Jordanian Dinar</option>
                      <option value="KWD" {% if data.currency == 'KWD' %}selected{% endif %}>Kuwaiti Dinar</option>
                      <option value="LYD" {% if data.currency == 'LYD' %}selected{% endif %}>Libyan Dinar</option>
                      <option value="LUF" {% if data.currency == 'LUF' %}selected{% endif %}>Luxembourg Franc</option>
                      <option value="MRO" {% if data.currency == 'MRO' %}selected{% endif %}>Mauritanian Ouguiya</option>
                      <option value="MAD" {% if data.currency == 'MAD' %}selected{% endif %}>Moroccan Dirham</option>
                      <option value="CHF" {% if data.currency == 'CHF' %}selected{% endif %}>Swiss Franc</option>
                      <option value="TRL" {% if data.currency == 'TRL' %}selected{% endif %}>Turkish Lira</option>
                      <option value="CFA" {% if data.currency == 'CFA' %}selected{% endif %}>CFA Franc</option>
                      <option value="A"   {% if data.currency == 'A'   %}selected{% endif %}>Aruban Florin</option>
                      <option value="DEM" {% if data.currency == 'DEM' %}selected{% endif %}>German Mark</option>
                      <option value="SAC" {% if data.currency == 'SAC' %}selected{% endif %}>Salvadoran Colón</option>
                      <option value="CZK" {% if data.currency == 'CZK' %}selected{% endif %}>Czech Koruna</option>
                      <option value="SEK" {% if data.currency == 'SEK' %}selected{% endif %}>Swedish Krona</option>
                      <option value="SKK" {% if data.currency == 'SKK' %}selected{% endif %}>Slovak Koruna</option>
                      <option value="SIT" {% if data.currency == 'SIT' %}selected{% endif %}>Slovenian Tolar</option>
                      <option value="SBD" {% if data.currency == 'SBD' %}selected{% endif %}>Solomon Islands Dollar</option>
                      <option value="ZAR" {% if data.currency == 'ZAR' %}selected{% endif %}>South African Rand</option>
                      <option value="LKR" {% if data.currency == 'LKR' %}selected{% endif %}>Sri Lanka Rupee</option>
                      <option value="SYP" {% if data.currency == 'SYP' %}selected{% endif %}>Syrian Pound</option>
                      <option value="TZS" {% if data.currency == 'TZS' %}selected{% endif %}>Tanzanian Shilling</option>
                      <option value="TTD" {% if data.currency == 'TTD' %}selected{% endif %}>Trinidad and Tobago Dollar</option>
                      <option value="AED" {% if data.currency == 'AED' %}selected{% endif %}>UAE Dirham</option>
                      <option value="VEB" {% if data.currency == 'VEB' %}selected{% endif %}>Venezuelan Bolívar</option>
                      <option value="VND" {% if data.currency == 'VND' %}selected{% endif %}>Vietnamese Dong</option>
                      <option value="XDR" {% if data.currency == 'XDR' %}selected{% endif %}>Special Drawing Rights</option>
                      <option value="CSD" {% if data.currency == 'CSD' %}selected{% endif %}>Serbian Dinar</option>
                      <option value="SRD" {% if data.currency == 'SRD' %}selected{% endif %}>Surinamese Dollar</option>
                      <option value="TJS" {% if data.currency == 'TJS' %}selected{% endif %}>Tajikistani Somoni</option>
                      <option value="UZS" {% if data.currency == 'UZS' %}selected{% endif %}>Uzbekistani Som</option>
                      <option value="MGA" {% if data.currency == 'MGA' %}selected{% endif %}>Malagasy Ariary</option>
                      <option value="TRY" {% if data.currency == 'TRY' %}selected{% endif %}>Turkish Lira</option>
                      <option value="RON" {% if data.currency == 'RON' %}selected{% endif %}>Romanian Leu</option>
                      <option value="AZN" {% if data.currency == 'AZN' %}selected{% endif %}>Azerbaijani Manat</option>
                      <option value="MZN" {% if data.currency == 'MZN' %}selected{% endif %}>Mozambican Metical</option>
                      <option value="ZWN" {% if data.currency == 'ZWN' %}selected{% endif %}>Zimbabwean Dollar</option>
                      <option value="USC" {% if data.currency == 'USC' %}selected{% endif %}>US Dollar (USC)</option>
                      <option value="SDG" {% if data.currency == 'SDG' %}selected{% endif %}>Sudanese Pound</option>
                      <option value="GHS" {% if data.currency == 'GHS' %}selected{% endif %}>Ghanaian Cedi</option>
                      <option value="ZWR" {% if data.currency == 'ZWR' %}selected{% endif %}>Zimbabwean Dollar</option>
                      <option value="TMT" {% if data.currency == 'TMT' %}selected{% endif %}>Turkmenistani Manat</option>
                      <option value="CUC" {% if data.currency == 'CUC' %}selected{% endif %}>Cuban Convertible Peso</option>
                      <option value="SSP" {% if data.currency == 'SSP' %}selected{% endif %}>South Sudanese Pound</option>
                      <option value="ZMW" {% if data.currency == 'ZMW' %}selected{% endif %}>Zambian Kwacha</option>
                      <option value="ZWL" {% if data.currency == 'ZWL' %}selected{% endif %}>Zimbabwean Dollar</option>
                      <option value="NGN" {% if data.currency == 'NGN' %}selected{% endif %}>Nigerian Naira</option>
                      <option value="RUB" {% if data.currency == 'RUB' %}selected{% endif %}>Russian Ruble</option>
                      <option value="HNL" {% if data.currency == 'HNL' %}selected{% endif %}>Honduran Lempira</option>
                      <option value="KPW" {% if data.currency == 'KPW' %}selected{% endif %}>North Korean Won</option>
                      <option value="LSL" {% if data.currency == 'LSL' %}selected{% endif %}>Lesotho Loti</option>
                      <option value="AMD" {% if data.currency == 'AMD' %}selected{% endif %}>Armenian Dram</option>
                      <option value="BOB" {% if data.currency == 'BOB' %}selected{% endif %}>Bolivian Boliviano</option>
                      <option value="ETB" {% if data.currency == 'ETB' %}selected{% endif %}>Ethiopian Birr</option>
                      <option value="GMD" {% if data.currency == 'GMD' %}selected{% endif %}>Gambian Dalasi</option>
                      <option value="NLG" {% if data.currency == 'NLG' %}selected{% endif %}>Dutch Guilder</option>
                      <option value="SLL" {% if data.currency == 'SLL' %}selected{% endif %}>Sierra Leonean Leone</option>
                      <option value="SOS" {% if data.currency == 'SOS' %}selected{% endif %}>Somali Shilling</option>
                      <option value="SVC" {% if data.currency == 'SVC' %}selected{% endif %}>Salvadoran Colón</option>
                      <option value="SZL" {% if data.currency == 'SZL' %}selected{% endif %}>Swazi Lilangeni</option>
                      <option value="THB" {% if data.currency == 'THB' %}selected{% endif %}>Thai Baht</option>
                      <option value="TMM" {% if data.currency == 'TMM' %}selected{% endif %}>Turkmenistani Manat</option>
                      <option value="TOP" {% if data.currency == 'TOP' %}selected{% endif %}>Tongan Pa'anga</option>
                      <option value="UAH" {% if data.currency == 'UAH' %}selected{% endif %}>Ukrainian Hryvnia</option>
                      <option value="UGX" {% if data.currency == 'UGX' %}selected{% endif %}>Ugandan Shilling</option>
                      <option value="UYU" {% if data.currency == 'UYU' %}selected{% endif %}>Uruguayan Peso</option>
                      <option value="VUV" {% if data.currency == 'VUV' %}selected{% endif %}>Vanuatu Vatu</option>
                      <option value="WST" {% if data.currency == 'WST' %}selected{% endif %}>Samoan Tala</option>
                      <option value="XCD" {% if data.currency == 'XCD' %}selected{% endif %}>East Caribbean Dollar</option>
                      <option value="YER" {% if data.currency == 'YER' %}selected{% endif %}>Yemeni Rial</option>
                      <option value="ZWD" {% if data.currency == 'ZWD' %}selected{% endif %}>Zimbabwean Dollar</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-lg bg-gradient-primary">Save Currency</button>
            </form>
            <div class="nav-item dropdown pe-2 d-flex align-items-center">
              <a href="javascript:;" class="nav-link p-0" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="fa fa-info-circle" aria-hidden="true" {% if data.dark_mode == 1 %} style="color: #344767;" {% else %}style="color: white;" {% endif %}></i>
              </a>
              <ul class="dropdown-menu dropdown-menu-end px-2 py-3 ms-n4" aria-labelledby="dropdownMenuButton">
                  <li class="mb-2">
                      <a class="dropdown-item border-radius-md" href="javascript:;">
                          <div class="text-center">
                              <p style="font-size: 14px; color: #666;">Note:</p>
                              <ul style="list-style-type: disc; text-align: left; margin-left: 20px; z-index=9999">
                                  <p>Some conversions for those currencies<br> aren't available at this time.</p>
                              </ul>
                          </div>
                      </a>
                  </li>
              </ul>
          </div>
            <style>
                /* Custom styles for the form */
                .form-group {
                    margin-bottom: 20px;
                }
                .form-control {
                    width: 100%;
                    padding: 10px;
                    border-radius: 5px;
                    border: 1px solid #ccc;
                }
                .btn-primary {
                    background-color: #007bff;
                    color: #fff;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 5px;
                    cursor: pointer;
                }
                .btn-primary:hover {
                    background-color: #0056b3;
                }
            </style>
            
            <!-- Include jQuery -->
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

            <!-- JavaScript code for handling form submissions -->
            <script>
                $(document).ready(function() {
                    $('#unitForm').submit(function(e) {
                        e.preventDefault();  // Prevent the default form submission

                        $.ajax({
                            type: 'POST',
                            url: '{% url "profile" %}',  // Use the URL of your profile view
                            data: $(this).serialize(),
                            success: function(response) {
                                // Handle success response
                                console.log(response);
                                location.reload();

                                // Optionally, update UI or show a success message
                            },
                            error: function(xhr, status, error) {
                                // Handle error response
                                console.error(xhr.responseText);
                            }
                        });
                    });

                    $('#currencyForm').submit(function(e) {
                        e.preventDefault();  // Prevent the default form submission

                        $.ajax({
                            type: 'POST',
                            url: '{% url "profile" %}',  // Use the URL of your profile view
                            data: $(this).serialize(),
                            success: function(response) {
                                // Handle success response
                                console.log(response);
                                // Optionally, update UI or show a success message
                                location.reload();

                            },
                            error: function(xhr, status, error) {
                                // Handle error response
                                console.error(xhr.responseText);
                            }
                        });
                    });
                });
            </script>

            
            </div>
          </div>
        </div>

        <!-- create account  -->
        {% if user.is_staff %}
        <div class="col-12 col-xl-4">
          <div class="card h-100">
            <div class="card-header text-center pt-4">
              <h5>Create an account</h5>
            </div>
            <div class="card-body p-3">
              <form method="post" action="{% url 'profile' %}">
                {% csrf_token %}
                <div class="form-group mb-3">
                  <label for="name1" class="form-label">Name</label>
                  <input type="text" id="name1" name="name1" class="form-control" placeholder="Enter your name" required>
                </div>
                <div class="form-group mb-3">
                  <label for="email1" class="form-label">Email</label>
                  <input type="email" id="email1" name="email1" class="form-control" placeholder="Enter your email" required>
                </div>
                <div class="form-group mb-3">
                  <label for="password1" class="form-label">Password</label>
                  <input type="password" id="password1" name="password1" class="form-control" placeholder="Enter password" required
                    pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d!@#$%^&*()-_+=]{8,}$"
                    title="Your password must contain at least 8 characters, including at least one letter, one number, and can contain special characters like !@#$%^&*()-_+=">
                  <!-- Add pattern and title attributes for validation -->
                </div>
                <div class="form-group mb-3">
                  <label for="password2" class="form-label">Confirm Password</label>
                  <input type="password" id="password2" name="password2" class="form-control" placeholder="Confirm password" required
                    pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d!@#$%^&*()-_+=]{8,}$"
                    title="Your password must contain at least 8 characters, including at least one letter, one number, and can contain special characters like !@#$%^&*()-_+=">
                  <!-- Add pattern and title attributes for validation -->
                </div>
                <div class="text-center">
                  <button
                    type="submit"
                    class="btn btn-lg bg-gradient-primary w-100 my-4 mb-2"
                  >
                    Create account 
                  </button>
                </div>
              </form>
              {% block extra_head %}
  {% if error %}
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: '{{ error }}',
         
        });
      });
    </script>
  {% endif %}
  {% block extra_body %}
  {% if success %}
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        let username = "{{ username }}";
        let password = "{{ password }}";
        let successMessage = `Account created successfully!\nUsername: ${username}\nPassword: ${password}`;
        
        Swal.fire({
          icon: 'success',
          title: 'Success!',
          text: successMessage.replace(/\n/g, ' '),  // Replace newlines with spaces
        });
      });
    </script>
  {% endif %}
{% endblock %}
{% endblock %}

            </div>
          </div>
        </div>
        {% endif %}
        
        <!-- submit rate and notes -->
{% if not user.is_staff %}
<div class="col-12 col-xl-4">
  <div class="card h-100">
    <div class="card-header text-center pt-4">
      <h5>Rate the Dashboard</h5>
    </div>
    <div class="card-body p-3">
      <form method="post" action="{% url 'submit_rate_and_notes' %}">
        {% csrf_token %}
        <div class="form-group">
          <label for="rates">Rate:</label>
          <div id="rateStars">
            <span class="star" data-rating="1">★</span>
            <span class="star" data-rating="2">★</span>
            <span class="star" data-rating="3">★</span>
            <span class="star" data-rating="4">★</span>
            <span class="star" data-rating="5">★</span>
          </div>
          <input type="hidden" id="selectedRate" name="rates" value="0">
        </div>
        <div class="form-group">
          <label for="notes">Notes:</label>
          <textarea id="notes" name="notes" class="form-control" rows="4" required></textarea>
        </div>
        <button type="submit" class="btn btn-lg bg-gradient-primary">Submit</button>
      </form>
    </div>
  </div>
</div>
{% endif %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const rateStars = document.querySelectorAll('#rateStars .star');
  
    rateStars.forEach(star => {
      star.addEventListener('click', function() {
        const rating = this.getAttribute('data-rating');
        document.querySelector('#selectedRate').value = rating;
  
        rateStars.forEach(s => {
          if (s.getAttribute('data-rating') <= rating) {
            s.classList.add('selected');
          } else {
            s.classList.remove('selected');
          }
        });
      });
    });
  });
  </script>
<style>
  .rating {
    display: inline-block;
  }
  .star {
    cursor: pointer;
    font-size: 24px; 
  }
  .selected {
    color: gold;
  }
  </style>
    

{% block extra_ts %}
{% if success_message %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    Swal.fire({
      icon: 'success',
      title: 'Success!',
      text: '{{ success_message }}',
    });
  });
</script>
{% elif error_message %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    Swal.fire({
      icon: 'error',
      title: 'Oops...',
      text: '{{ error_message }}',
    });
  });
</script>
{% endif %}
{% endblock %}
      
 <!-- password changer -->
<div class="col-12 col-xl-4">
  <div class="card h-100">
    <div class="card-header text-center pt-4 d-flex justify-content-between align-items-center">
        <div class="flex-grow-1 text-center">
            <h5 class="mb-0">Change your password</h5>
        </div>
        <div class="nav-item dropdown pe-2 d-flex align-items-center">
            <a href="javascript:;" class="nav-link p-0" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa fa-info-circle" aria-hidden="true" {% if data.dark_mode == 1 %} style="color: #344767;" {% else %}style="color: white;" {% endif %}></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end px-2 py-3 ms-n4" aria-labelledby="dropdownMenuButton">
                <li class="mb-2">
                    <a class="dropdown-item border-radius-md" href="javascript:;">
                        <div class="text-center">
                            <p style="font-size: 14px; color: #666;">Password must:</p>
                            <ul style="list-style-type: disc; text-align: left; margin-left: 20px;">
                                <li>Contain at least 8 characters</li>
                                <li>Include at least one letter</li>
                                <li>Contain at least one number</li>
                                <li>Allow special characters like !@#$%^&*()-_+=</li>
                            </ul>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
    </div>
      <div class="card-body p-3">
          <form method="post" action="{% url 'change_password' %}">
              {% csrf_token %}
              <div class="form-group mb-3">
                  <label for="old_password" class="form-label">Old Password</label>
                  <input type="password" id="old_password" name="old_password" class="form-control"placeholder="Enter your old password" required>
              </div>
              <div class="form-group mb-3">
                  <label for="new_password1" class="form-label">New Password</label>
                  <input type="password" id="new_password1" name="new_password1" class="form-control"placeholder="Enter your new password" required
                         pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d!@#$%^&*()-_+=]{8,}$"
                         title="Your password must contain at least 8 characters, including at least one letter, one number, and can contain special characters like !@#$%^&*()-_+=">
                  <!-- Add pattern and title attributes for validation -->
              </div>
              <div class="form-group mb-3">
                  <label for="new_password2" class="form-label">Confirm New Password</label>
                  <input type="password" id="new_password2" name="new_password2" class="form-control"placeholder="Confirm password" required
                         pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d!@#$%^&*()-_+=]{8,}$"
                         title="Your password must contain at least 8 characters, including at least one letter, one number, and can contain special characters like !@#$%^&*()-_+=">
                  <!-- Add pattern and title attributes for validation -->
              </div>
              <div class="text-center">
                <button
                  type="submit"
                  class="btn btn-lg bg-gradient-primary w-100 my-4 mb-2"
                >
                  Change password
                </button>
              </div>
          </form>
          {% if success_password_change %}
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          Swal.fire({
            position: "center",
            icon: "success",
            title: "Your password has been changed successfully",
            showConfirmButton: false,
            timer: 2000,
          });
        });
      </script>
      {% endif %}
      {% block extra_js %}
        {% if errors %}
          <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
          <script>
            document.addEventListener('DOMContentLoaded', function () {
              let errorMessages = '';
              {% for field, errors in errors.items %}
                errorMessages += '{{ field|capfirst }}: ';
                {% for error in errors %}
                  errorMessages += '{{ error }}\n';
                {% endfor %}
              {% endfor %}
              
              Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: errorMessages,
              
              });
            });
          </script>
        {% endif %}
      {% endblock %}

            </div>
        </div>
      </div>

      </div>
      <footer class="footer pt-3">
        <div class="container-fluid">
          <div class="row align-items-center justify-content-lg-between">
            <div class="col-lg-6 mb-lg-0 mb-4">
              <div
                class="copyright text-center text-sm text-muted text-lg-start"
              >
                ©
                <script>
                  document.write(new Date().getFullYear());
                </script>
                Tunisair Stagiaires
                <a class="font-weight-bold" target="_blank"></a>
              </div>
            </div>
            <div class="col-lg-6">
              <ul
                class="nav nav-footer justify-content-center justify-content-lg-end"
              >
                <li class="nav-item">
                  <a
                    href="https://www.tunisair.com"
                    class="nav-link text-muted"
                    target="_blank"
                    >Company</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    href="https://www.tunisair.com/fr/presentation"
                    class="nav-link text-muted"
                    target="_blank"
                    >About Us</a
                  >
                </li>
              </ul>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>

  {% include 'settings.html' %}
  <!--   Settings   -->

  <!--   Core JS Files   -->
  <script src="../static/js/core/popper.min.js"></script>
  <script src="../static/js/core/bootstrap.min.js"></script>
  <script src="../static/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../static/js/plugins/smooth-scrollbar.min.js"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../static/js/soft-ui-dashboard.min.js?v=1.0.3"></script>
</body>

</html>